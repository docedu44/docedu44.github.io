---
id: docker-react
title: docker-react
author: mamadfar
---

### Dockerfile

برای شروع ابتدا باید یک **Dockerfile** ( دقیقا با همین نام ) در فولدر اصلی پروژه بسازیم و کد های زیر را در آن استفاده کنیم:

<div dir="ltr">

```docker
    FROM node:14
    WORKDIR /hami-dashboard
    ENV PATH="./node_modules/.bin:$PATH"
    COPY . ./
    RUN npm install
    RUN npm run build
    CMD ["npm", "start"]
```

</div>

`FROM`: بسته به ورژن استفاده شده **node** در هنگام ساخت پروژه، ورژن آن را مقابل **FROM** می نویسیم ( حتما قبل از آن باید در سایت **hub.docker.com** چک کنیم ک ورژن نوشته شده، موجود باشد ).

`WORKDIR`: مسیر فولدر اصلی پروژه می باشد ک **Dockerfile** در آن می باشد.

`ENV PATH`: مسیر ماژول های استفاده شده می باشد ک برای **JS** باید مسیر **node_modules** داده شود.

`COPY`: آرگومان اول مسیر و نام فایل مورد نظر می باشد و آرگومان دوم مسیر فولدر مورد نظر در داکر می باشد ( فایل ها کپی می شوند و در داکر الصاق می شوند ).

`RUN`: دستور های مورد نیاز را در این قسمت قرار می دهیم تا بعد از کپی شدن، اجرا شوند.

`CMD`: آخرین دستور مورد نیاز برای اجرا شدن برنامه می باشد ک باید آرایه ای از کلمات ( مثلا دستور بالا موقع اجرا شدن به **npm start** تبدیل می شود ).

🎉 حال توسط دستور زیر می توان **Dockerfile** را اجرا کنیم:

<div dir="ltr">

```cmd
    docker build --tag hami-dashboard .
```

</div>

که **tag** نام **image** ساخته شده را تعیین می کند و نقطه ( . ) مسیر ساخت **image** می باشد.

## ساخت کانتینر

حال توسط دستور زیر **container** مورد نظر را بر اساس **image** ساخته شده می سازیم و اجرا می کنیم:

<div dir="ltr">

```cmd
    docker run --name hami-dashboard -p 3010:3000 -d hami-dashboard
```

</div>

`name`: که اسم بعد از پرچم **name** در واقع نام **container** ما می باشد و می تواند نامی متفاوت از نام **image** باشد

`-p`: ( مخفف publish می باشد ) در واقع نشانگر و تعیین کننده **port** می باشد و 2 آرگومان دارد ک آرگومان اول **port** دلخواه ما می باشد ک می خواهیم **app** را با آن پورت ببینیم و دومی پورت اصلی **app** ما می باشد ک **react** به صورت پیش فرض از پورت **3000** استفاده می کند.

`-d`: نشانگر **detach** شدن می باشد یعنی اگر بخواهیم بعد از ساخت **container**، بخواهیم به کارمان ادامه دهیم از این پرچم استفاده می کنیم.

و بعد از **-d** نام **image** ساخته شده را باید درست وارد کنیم.

## موارد اضافه

🎉 توسط دستور زیر می توان لیست **image** ها را دید:

<div dir="ltr">

```cmd
    docker images
```

</div>

🎉 میتوان برای کپی نکردن فایل ها و فولدر هایی ک نیاز نداریم یک فایل **dockerignore.** بسازیم و مانند کد زیر نام فایل ها و فولدر های غیر ضروری را بنویسیم:

<div dir="ltr">

```
    node_modules
    build
    .dockerignore
    Dockerfile
    Dockerfile.prod
```

</div>